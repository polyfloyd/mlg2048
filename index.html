<!doctype html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
	<title>MLG 2048</title>
	<meta name="description" content="2048 BLAZE IT" />

	<!-- CSS -->
	<link rel="stylesheet" href="lib/normalizecss/normalize.css" />
	<link rel="stylesheet" href="font/pricedown/include.css" />
	<link rel="stylesheet" href="css/style.css" />
	<link rel="stylesheet" href="css/animations.css" />
	<link rel="stylesheet" href="css/game.css" />

	<script type="text/javascript">
		window._paq = window._paq || [];
		(function() {
			var u = '\/\/analytics.polyfloyd.net\/';
			_paq.push(['trackPageView']);
			_paq.push(['enableLinkTracking']);
			_paq.push(['setTrackerUrl', u+'piwik.php']);
			_paq.push(['setSiteId',  6]);
			var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
			g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
		})();
	</script>
	<noscript><img src="//analytics.polyfloyd.net/piwik.php?idsite=6" style="border:0;" alt="" /></noscript>
</head>
<body>
	<canvas class="gl-background"></canvas>
	<script type="text/x-fragment-shader" class="background-shader">
		#ifdef GL_ES
		precision mediump float;
		#endif

		uniform float time;
		uniform float level;
		uniform float random;
		uniform vec2 resolution;

		void main(void) {
			float center_motion = clamp(level * 2.0 - 1.0, 0.0, 1.0);
			bool invert = level > 0.8;
			float wave_speed = clamp(level * 12.0, 0.0, 12.0) + 1.0;

			vec2 center = vec2(
				resolution.x * 0.5 + cos(time * 6.0) * resolution.x * 0.25 * center_motion,
				resolution.y * 0.5 + sin(time * 2.0) * resolution.y * 0.25 * center_motion
			);
			float dist = distance(gl_FragCoord.xy, center);

			float wave_scale = 12.0;

			if (invert && mod(floor(time*12.0), 2.0) == 0.0 && random > 0.5) {
				float col = cos(log(dist) * wave_scale - time * wave_speed) * 0.5 + 0.5;
				gl_FragColor = vec4(col, col, col, 1.0);
				return;
			}

			gl_FragColor = vec4(
				cos(log(dist) * wave_scale                    - time * wave_speed) * 0.5 + 0.5,
				cos(log(dist) * wave_scale + wave_scale * 3.0 - time * wave_speed) * 0.5 + 0.5,
				cos(log(dist) * wave_scale + wave_scale * 6.0 - time * wave_speed) * 0.5 + 0.5,
				1.0
			);
		}
	</script>

	<div class="content">
		<div class="logo">
			<h1>MLG 2048</h1>
		</div>

		<div class="game">
			<h3 class="game-score"></h3>
			<div class="game-board">
				<template class="tmpl-game-cell-2">
					<div class="game-cell game-cell-2"><span></span></div>
				</template>
				<template class="tmpl-game-cell-4">
					<div class="game-cell game-cell-4"><span></span></div>
				</template>
				<template class="tmpl-game-cell-8">
					<div class="game-cell game-cell-8"><span></span></div>
				</template>
				<template class="tmpl-game-cell-16">
					<div class="game-cell game-cell-16"><span></span></div>
				</template>
				<template class="tmpl-game-cell-32">
					<div class="game-cell game-cell-32"><span></span></div>
				</template>
				<template class="tmpl-game-cell-64">
					<div class="game-cell game-cell-64"><span></span></div>
				</template>
				<template class="tmpl-game-cell-128">
					<div class="game-cell game-cell-128"><span></span></div>
				</template>
				<template class="tmpl-game-cell-256">
					<div class="game-cell game-cell-256"><span></span></div>
				</template>
				<template class="tmpl-game-cell-512">
					<div class="game-cell game-cell-512"><span></span></div>
				</template>
				<template class="tmpl-game-cell-1024">
					<div class="game-cell game-cell-1024"><span></span></div>
				</template>
				<template class="tmpl-game-cell-2048">
					<div class="game-cell game-cell-2048"><span></span></div>
				</template>
				<img class="ratio" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAADUlEQVQI12NgYGBgAAAABQABXvMqOgAAAABJRU5ErkJggg==" />
				<div class="game-board-bg">
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
				</div>
				<div class="game-board-cells"></div>
			</div>
		</div>

		<div class="description">
			<h1>MLG 2048</h1>
			<p>
				2048 BLAZE IT
			</p>
		</div>
	</div>

	<div class="animations"></div>
	<template class="tmpl-anim-airhorn">
		<div class="anim-airhorn">
			<img src="img/airhorn.png" />
		</div>
	</template>
	<template class="tmpl-anim-sanic">
		<div class="anim-sanic">
			<img src="img/sanic.png" />
		</div>
	</template>

	<!-- JS -->
	<script type="text/javascript" src="lib/howlerjs/howler.js"></script>
	<script type="text/javascript" src="js/misc.js"></script>
	<script type="text/javascript" src="js/game.js"></script>
	<script type="text/javascript" src="js/shaderview.js"></script>
	<script type="text/javascript" src="js/view.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
</body>
<html>
